{"ast":null,"code":"import _objectSpread from\"C:/Users/braya/OneDrive/Escritorio/book_controlbox/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./LoginSignup.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginSignup(_ref){let{onLogin,onSignup,errorMessage}=_ref;const[isLogin,setIsLogin]=useState(true);const[formData,setFormData]=useState({name:'',// Nuevo campo para el nombre\nemail:'',password:''});const[error,setError]=useState('');// Cargar usuarios registrados desde localStorage\nconst loadUsersFromLocalStorage=()=>{const users=JSON.parse(localStorage.getItem('registeredUsers'));return users||[];// Si no hay usuarios guardados, devolver un array vacío\n};// Estado de los usuarios registrados, inicializado con los datos de localStorage\nconst[registeredUsers,setRegisteredUsers]=useState(loadUsersFromLocalStorage());// Función para actualizar el localStorage cuando los usuarios cambien\nconst updateLocalStorage=users=>{localStorage.setItem('registeredUsers',JSON.stringify(users));};// Actualizar localStorage cuando la lista de usuarios cambie\nuseEffect(()=>{updateLocalStorage(registeredUsers);},[registeredUsers]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=e=>{e.preventDefault();if(isLogin){// Verificamos las credenciales de login\nconst user=registeredUsers.find(user=>user.email===formData.email&&user.password===formData.password);if(user){onLogin(user);// Pasamos el usuario completo al login\nsetError('');// Limpiar cualquier error previo\n}else{setError('Correo o contraseña incorrectos');}}else{// Registro de usuario: agregamos al \"base de datos\"\nconst existingUser=registeredUsers.find(user=>user.email===formData.email);if(existingUser){setError('Este correo ya está registrado');}else{const newUser={name:formData.name,email:formData.email,password:formData.password};setRegisteredUsers(prevUsers=>[...prevUsers,newUser]);// Agregamos al nuevo usuario\nonSignup(newUser);// Llamamos a la función de signup\nsetError('');// Limpiar cualquier error previo\nsetIsLogin(true);// Cambiamos a la vista de login después de registrarse\nsetFormData({name:'',email:'',password:''});// Limpiamos el formulario\n}}};// Validación simple para el correo\nconst isEmailValid=/\\S+@\\S+\\.\\S+/.test(formData.email);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isLogin?'Biblioteca Virtual':'Registrarse'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[!isLogin&&/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",required:!isLogin// Requerido solo en el registro\n,value:formData.name,onChange:handleInputChange,placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Nombre\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",required:true,value:formData.email,onChange:handleInputChange,placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Correo electr\\xF3nico\"}),!isEmailValid&&formData.email.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:\"Por favor, ingresa un correo v\\xE1lido\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",required:true,value:formData.password,onChange:handleInputChange,placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Contrase\\xF1a\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:isLogin?'Iniciar sesión':'Registrarse',disabled:!isLogin&&(formData.name.length===0||formData.password.length===0)||!isEmailValid||formData.password.length===0// Desactivar si hay campos vacíos o inválidos\n})]}),/*#__PURE__*/_jsxs(\"p\",{children:[isLogin?'¿No tienes una cuenta? ':'¿Ya tienes cuenta? ',/*#__PURE__*/_jsx(\"span\",{className:\"link\",onClick:()=>setIsLogin(!isLogin),children:isLogin?'Regístrate':'Inicia sesión'})]})]})});}export default LoginSignup;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","LoginSignup","_ref","onLogin","onSignup","errorMessage","isLogin","setIsLogin","formData","setFormData","name","email","password","error","setError","loadUsersFromLocalStorage","users","JSON","parse","localStorage","getItem","registeredUsers","setRegisteredUsers","updateLocalStorage","setItem","stringify","handleInputChange","e","value","target","prev","_objectSpread","handleSubmit","preventDefault","user","find","existingUser","newUser","prevUsers","isEmailValid","test","className","children","onSubmit","type","id","required","onChange","placeholder","htmlFor","length","disabled","onClick"],"sources":["C:/Users/braya/OneDrive/Escritorio/book_controlbox/frontend/src/LoginSignup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './LoginSignup.css';\r\n\r\n\r\nfunction LoginSignup({ onLogin, onSignup, errorMessage }) {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [formData, setFormData] = useState({\r\n    name: '', // Nuevo campo para el nombre\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  // Cargar usuarios registrados desde localStorage\r\n  const loadUsersFromLocalStorage = () => {\r\n    const users = JSON.parse(localStorage.getItem('registeredUsers'));\r\n    return users || []; // Si no hay usuarios guardados, devolver un array vacío\r\n  };\r\n\r\n  // Estado de los usuarios registrados, inicializado con los datos de localStorage\r\n  const [registeredUsers, setRegisteredUsers] = useState(loadUsersFromLocalStorage());\r\n\r\n  // Función para actualizar el localStorage cuando los usuarios cambien\r\n  const updateLocalStorage = (users) => {\r\n    localStorage.setItem('registeredUsers', JSON.stringify(users));\r\n  };\r\n\r\n  // Actualizar localStorage cuando la lista de usuarios cambie\r\n  useEffect(() => {\r\n    updateLocalStorage(registeredUsers);\r\n  }, [registeredUsers]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isLogin) {\r\n      // Verificamos las credenciales de login\r\n      const user = registeredUsers.find(\r\n        (user) => user.email === formData.email && user.password === formData.password\r\n      );\r\n\r\n      if (user) {\r\n        onLogin(user); // Pasamos el usuario completo al login\r\n        setError(''); // Limpiar cualquier error previo\r\n      } else {\r\n        setError('Correo o contraseña incorrectos');\r\n      }\r\n    } else {\r\n      // Registro de usuario: agregamos al \"base de datos\"\r\n      const existingUser = registeredUsers.find(\r\n        (user) => user.email === formData.email\r\n      );\r\n\r\n      if (existingUser) {\r\n        setError('Este correo ya está registrado');\r\n      } else {\r\n        const newUser = { name: formData.name, email: formData.email, password: formData.password };\r\n        setRegisteredUsers((prevUsers) => [...prevUsers, newUser]); // Agregamos al nuevo usuario\r\n        onSignup(newUser); // Llamamos a la función de signup\r\n        setError(''); // Limpiar cualquier error previo\r\n        setIsLogin(true); // Cambiamos a la vista de login después de registrarse\r\n        setFormData({ name: '', email: '', password: '' }); // Limpiamos el formulario\r\n      }\r\n    }\r\n  };\r\n\r\n  // Validación simple para el correo\r\n  const isEmailValid = /\\S+@\\S+\\.\\S+/.test(formData.email);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"form-container\">\r\n        <h2>{isLogin ? 'Biblioteca Virtual' : 'Registrarse'}</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          {!isLogin && (\r\n            <div className=\"input-group\">\r\n              <input\r\n                type=\"text\"\r\n                id=\"name\"\r\n                name=\"name\"\r\n                required={!isLogin} // Requerido solo en el registro\r\n                value={formData.name}\r\n                onChange={handleInputChange}\r\n                placeholder=\" \"\r\n              />\r\n              <label htmlFor=\"name\">Nombre</label>\r\n            </div>\r\n          )}\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              required\r\n              value={formData.email}\r\n              onChange={handleInputChange}\r\n              placeholder=\" \"\r\n            />\r\n            <label htmlFor=\"email\">Correo electrónico</label>\r\n            {!isEmailValid && formData.email.length > 0 && (\r\n              <span className=\"error-text\">Por favor, ingresa un correo válido</span>\r\n            )}\r\n          </div>\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              required\r\n              value={formData.password}\r\n              onChange={handleInputChange}\r\n              placeholder=\" \"\r\n            />\r\n            <label htmlFor=\"password\">Contraseña</label>\r\n          </div>\r\n          {error && <div className=\"error-message\">{error}</div>} {/* Muestra el mensaje de error */}\r\n          <input\r\n            type=\"submit\"\r\n            value={isLogin ? 'Iniciar sesión' : 'Registrarse'}\r\n            disabled={\r\n              (!isLogin && (formData.name.length === 0 || formData.password.length === 0)) ||\r\n              !isEmailValid ||\r\n              formData.password.length === 0\r\n            } // Desactivar si hay campos vacíos o inválidos\r\n          />\r\n        </form>\r\n        <p>\r\n          {isLogin ? '¿No tienes una cuenta? ' : '¿Ya tienes cuenta? '}\r\n          <span\r\n            className=\"link\"\r\n            onClick={() => setIsLogin(!isLogin)}\r\n          >\r\n            {isLogin ? 'Regístrate' : 'Inicia sesión'}\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginSignup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}